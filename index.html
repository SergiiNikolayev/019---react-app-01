<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>React APP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app"></div>
    <script type="text/babel" >
        var appId = document.getElementById('app');

        var Note = React.createClass({

            render: function () {
                var colorStyles = { backgroundColor: this.props.color };
                return (
                        <div className="note" style={colorStyles}> {this.props.children} </div>
                );
            }
        });



        var NoteEditor = React.createClass({


            getInitialState: function () {
                return{
                    text: '',
                   textDescription: ''
                };
            },

            handleTextChangeMoney: function (event) {
                this.setState({ text: event.target.value });
            },


            handleTextChangeDescription: function (event) {
                this.setState({ textDescription: event.target.value });
            },



            handleNoteAdd: function () {
                /** forming new object with new Note*/
                var newNote = {
                    text: this.state.text,
                    textDescription: this.state.textDescription,
                    color: 'yellow',
                    //when: date(),
                    id: Date.now()
                };

                this.props.onNoteAdd(newNote);
            },

            render: function () {
                return (
                        <div className="note-editor">
                            <input type="text" placeholder="Money" className="input-money" onChange={this.handleTextChangeMoney}/>
                            <input type="text" placeholder="Description" className="input-description" onChange={this.handleTextChangeDescription}/>
                            <button className="add-button" onClick={this.handleNoteAdd}>Add</button>
                        </div>
                );
            }
        });

        var NotesGrid = React.createClass({
            render: function () {
                return (
                        <div className="notes-grid">
                            {
                                this.props.notes.map(function(note) {
                                    return <Note key={note.id} color={note.color} > <span className="notes-money"> {note.text + " | "}{note.when} </span> {note.textDescription} </Note>;
                                })
                            }
                        </div>
                )
            }
        });


        var NotesApp = React.createClass({
            getInitialState: function () {
                return {
                    notes: [
                        { //here stores array of notes
                            id: 0,
                            money: 100,
                            text: "qwerty",
                            color: "#ffd700"
                        }, {
                            id: 1,
                            money: 200,
                            text: "asdfgh",
                            color: "#20b2aa"
                        }, {
                            id: 2,
                            money: 150,
                            text: "zxcvbnm",
                            color: "#90ee90"
                        }
                    ]
                };
            },
            
            handleNoteAdd: function (newNote) {
                var newNotes = this.state.notes.slice();
                newNotes.unshift(newNote); //The unshift() method adds one or more elements to the beginning of an array and returns the new length of the array.
                this.setState({ notes: newNotes });
            },
            
            render: function () {
                return (
                        <div className="notes-app">
                            NotesApp
                            <NoteEditor onNoteAdd={this.handleNoteAdd}/>
                            <NotesGrid notes={this.state.notes}/>
                        </div>
                );
            }
        });

        ReactDOM.render(<NotesApp />, appId);
</script>
</body>
</html>